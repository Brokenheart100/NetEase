<UserControl x:Class="NetEase.Views.Pages.SignUpView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:NetEase.Views.Pages"
             xmlns:viewmodels="clr-namespace:NetEase.ViewModels"
             d:DataContext="{d:DesignInstance Type=viewmodels:AuthenticationViewModel}"
             mc:Ignorable="d"
             d:DesignHeight="450"
             d:DesignWidth="800">
    <UserControl.Resources>
        <!-- 输入框的通用样式 -->
        <Style x:Key="SignUpInputBoxStyle"
               TargetType="Border">
            <Setter Property="Background"
                    Value="#F6F7F9"/>
            <Setter Property="CornerRadius"
                    Value="8"/>
            <Setter Property="Padding"
                    Value="15"/>
            <Setter Property="Margin"
                    Value="0,10"/>
        </Style>

        <!-- 输入框内部 TextBox 的样式 -->
        <Style x:Key="InputTextBoxStyle"
               TargetType="TextBox">
            <Setter Property="Background"
                    Value="Transparent"/>
            <Setter Property="BorderThickness"
                    Value="0"/>
            <Setter Property="Foreground"
                    Value="#333"/>
            <Setter Property="FontSize"
                    Value="14"/>
            <Setter Property="VerticalContentAlignment"
                    Value="Center"/>
        </Style>

        <!-- 社交媒体按钮样式 -->
        <Style x:Key="SocialButtonStyle"
               TargetType="Button">
            <Setter Property="Background"
                    Value="White"/>
            <Setter Property="Foreground"
                    Value="Black"/>
            <Setter Property="Width"
                    Value="32"/>
            <Setter Property="Height"
                    Value="32"/>
            <Setter Property="BorderThickness"
                    Value="0"/>
            <Setter Property="Cursor"
                    Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="16">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="InputTextBoxWithPlaceholderStyle" TargetType="TextBox">
            <!-- 您可以继承已有的 TextBox 样式 -->
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="#333"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="CaretBrush" Value="Black"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <!-- 1. 背景和边框 -->
                            <Border x:Name="border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            SnapsToDevicePixels="True"/>

                            <!-- 2. 占位符文本 (TextBlock) -->
                            <!-- IsHitTestVisible="False" 确保它可以被点击穿透 -->
                            <TextBlock x:Name="PlaceholderText"
                               Text="{TemplateBinding Tag}"
                               Foreground="#A0A0A0" 
                               FontSize="{TemplateBinding FontSize}"
                               VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                               HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                               Padding="{TemplateBinding Padding}"
                               Margin="5,0,0,0"
                               IsHitTestVisible="False"
                               Visibility="Collapsed"/> 
                    
                    <!-- 3. 真正的文本输入区域 -->
                    <ScrollViewer x:Name="PART_ContentHost"
                                  Focusable="False"
                                  HorizontalScrollBarVisibility="Hidden"
                                  VerticalScrollBarVisibility="Hidden"/>
                </Grid>

                        <ControlTemplate.Triggers>
                            <!-- 当 TextBox 的 Text 为空时，显示占位符 -->
                            <Trigger Property="Text" Value="">
                                <Setter TargetName="PlaceholderText" Property="Visibility" Value="Visible"/>
                            </Trigger>
                            <!-- 当 TextBox 获得焦点时，即使 Text 为空，也隐藏占位符 -->
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="PlaceholderText" Property="Visibility" Value="Collapsed"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ClickBtn"
               TargetType="Button">
                    <Setter Property="Background"
                            Value="#007BFF"/>
                    <Setter Property="Foreground"
                            Value="White"/>
                    <Setter Property="BorderThickness"
                            Value="0"/>
                    <Setter Property="Padding"
                            Value="12,12"/>
                    <Setter Property="Cursor"
                            Value="Hand"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        CornerRadius="8">
                                    <!-- ContentPresenter 用于展示按钮的 Content（文字或其他内容） -->
                                    <ContentPresenter HorizontalAlignment="Center" 
                                                      VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
        </Style>
    </UserControl.Resources>

    <Grid ShowGridLines="True">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <!-- 左侧占 2/5 -->
            <ColumnDefinition Width="3*"/>
            <!-- 右侧占 3/5 -->
        </Grid.ColumnDefinitions>

        <!-- ======================= 左侧面板 ======================= -->
        <Grid Grid.Column="0"
              ShowGridLines="True">
            <Grid.Background>
                <!-- 背景图片 -->
                <ImageBrush ImageSource="E:\Computer\VS\NetEase\CoverImage\20.jpg"
                            Stretch="UniformToFill"/>
            </Grid.Background>
            <!-- 半透明遮罩层，让文字更清晰 -->
            <Border Background="#A0000000"/>

            <Grid Margin="40"
                  ShowGridLines="True">
                <!-- 菜单按钮 -->
                <StackPanel Orientation="Horizontal"
                            VerticalAlignment="Top"
                            HorizontalAlignment="Left">
                    <TextBlock Text="&#xE700;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="20"
                               Foreground="White"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="Menu"
                               FontSize="16"
                               Foreground="White"
                               VerticalAlignment="Center"
                               Margin="10,0,0,0"/>
                </StackPanel>

                <!-- Logo -->
                <StackPanel Orientation="Horizontal"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Center">
                    <TextBlock Text="&#xE7F8;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="32"
                               Foreground="White"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="ELBOD2i"
                               FontSize="28"
                               FontWeight="Bold"
                               Foreground="White"
                               VerticalAlignment="Center"
                               Margin="10,0,0,0"/>
                </StackPanel>

                <!-- 社交媒体按钮 -->
                <StackPanel Orientation="Horizontal"
                            VerticalAlignment="Bottom"
                            HorizontalAlignment="Center"
                            Margin="0,0,0,20">
                    <Button Style="{StaticResource SocialButtonStyle}"
                            Margin="10,0">
                        <TextBlock Text="f"
                                   FontFamily="Arial"
                                   FontWeight="Bold"/>
                    </Button>
                    <Button Style="{StaticResource SocialButtonStyle}"
                            Margin="10,0">
                        <!-- Instagram Icon (Path data) -->
                        <Path Data="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"
                              Fill="Black"
                              Width="16"
                              Height="16"
                              Stretch="Uniform"/>
                    </Button>
                    <Button Style="{StaticResource SocialButtonStyle}"
                            Margin="10,0">
                        <!-- Twitter Icon (Path data) -->
                        <Path Data="M22.46,6C21.64,6.35 20.76,6.58 19.83,6.69C20.79,6.11 21.54,5.22 21.88,4.13C21,4.64 20.03,5.03 19,5.26C18.21,4.42 17,3.92 15.75,3.92C13.38,3.92 11.43,5.87 11.43,8.24C11.43,8.58 11.47,8.91 11.54,9.23C8.03,9.06 4.93,7.38 2.8,4.79C2.44,5.42 2.25,6.16 2.25,6.94C2.25,8.43 3,9.78 4.18,10.63C3.47,10.61 2.8,10.4 2.22,10.08V10.13C2.22,12.21 3.73,13.91 5.79,14.33C5.45,14.42 5.08,14.46 4.7,14.46C4.42,14.46 4.15,14.43 3.89,14.38C4.43,16.09 6.02,17.29 7.89,17.32C6.4,18.45 4.54,19.15 2.5,19.15C2.17,19.15 1.84,19.13 1.5,19.08C3.38,20.28 5.66,21 8.12,21C15.75,21 20.25,14.64 20.25,9.05C20.25,8.87 20.25,8.7 20.24,8.53C21.05,7.96 21.82,7.24 22.46,6Z"
                              Fill="Black"
                              Width="16"
                              Height="16"
                              Stretch="Uniform"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- ======================= 右侧表单 ======================= -->
        <Grid Grid.Column="1"
              Background="White"
              ShowGridLines="True">
            <Grid VerticalAlignment="Center"
                  HorizontalAlignment="Center"
                  Width="350"
                  ShowGridLines="True">
                <!-- ########## 1. 登录视图 ########## -->
                <StackPanel x:Name="LoginPanel">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <!-- 当 IsRegistering 为 True 时，隐藏登录视图 -->
                                <DataTrigger Binding="{Binding IsRegistering}" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style>

                    <TextBlock Text="Login" FontSize="32" FontWeight="Bold" Foreground="#333"/>
                    <TextBlock Text="Please enter your details to login" FontSize="14" Foreground="Gray" Margin="0,5,0,20"/>

                    <Border Style="{StaticResource SignUpInputBoxStyle}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE77B;"
                                       FontFamily="Segoe MDL2 Assets"
                                       Foreground="Gray"
                                       VerticalAlignment="Center"/>
                            <TextBox Style="{StaticResource InputTextBoxWithPlaceholderStyle}"  
                                     Text="{Binding Email}" Tag="Email"/>
                        </StackPanel>
                    </Border>
                    <Border Style="{StaticResource SignUpInputBoxStyle}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE72E;"
                                       FontFamily="Segoe MDL2 Assets"
                                       Foreground="Gray"
                                       VerticalAlignment="Center"/>
                            <TextBox Style="{StaticResource InputTextBoxWithPlaceholderStyle}" 
                                     Text="{Binding Password}" Tag="Password"/>
                        </StackPanel>
                </Border>

                    <Button Content="Login" Command="{Binding LoginCommand}" 
                            Style="{StaticResource ClickBtn}"
                            HorizontalAlignment="Right"
                            Margin="0,20,0,0"
                            Width="70"
                            Height="30"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,40,0,0">
                        <TextBlock Text="Don't have an account?" Foreground="Gray"/>
                        <!-- 点击此按钮切换到注册视图 -->
                        <Button Content="Sign Up" Command="{Binding ShowRegisterViewCommand}" Foreground="#007BFF" Background="Transparent" BorderThickness="0" Cursor="Hand" Margin="5,0,0,0"/>
                    </StackPanel>
                </StackPanel>

                <!-- ########## 2. 注册视图 ########## -->
                <StackPanel x:Name="RegisterPanel">
                    <StackPanel.Style>
                        <Style TargetType="StackPanel">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <!-- 当 IsRegistering 为 True 时，显示注册视图 -->
                                <DataTrigger Binding="{Binding IsRegistering}" Value="True">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </StackPanel.Style> 

                    <TextBlock Text="Sign Up"
                           FontSize="32"
                           FontWeight="Bold"
                           Foreground="#333"/>
                    <TextBlock Text="Please fill your information below"
                           FontSize="14"
                           Foreground="Gray"
                           Margin="0,5,0,20"/>

                    <!-- Name Input -->
                    <Border Style="{StaticResource SignUpInputBoxStyle}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE77B;"
                                   FontFamily="Segoe MDL2 Assets"
                                   Foreground="Gray"
                                   VerticalAlignment="Center"/>
                            <TextBox Style="{StaticResource InputTextBoxWithPlaceholderStyle}" 
                                     Text="{Binding Name}"
                                     Margin="10,0,0,0"
                                     Width="250"
                                     Tag="Name"/>
                        </StackPanel>
                    </Border>

                    <!-- Mobile Number Input -->
                    <Border Style="{StaticResource SignUpInputBoxStyle}"
                            BorderBrush="#007BFF"
                            BorderThickness="1.5">
                        <StackPanel>
                            <TextBlock Text="Mobile number"
                                   FontSize="12"
                                   Foreground="#007BFF"
                                   Margin="0,0,0,5"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="&#xE756;"
                                       FontFamily="Segoe MDL2 Assets"
                                       Foreground="#333"
                                       VerticalAlignment="Center"/>
                                <TextBox Style="{StaticResource InputTextBoxStyle}"
                                     Text="{Binding MobileNumber}"
                                     Margin="10,0,0,0"
                                     Width="250"
                                     Tag="9456784567"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Email Input -->
                    <Border Style="{StaticResource SignUpInputBoxStyle}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE715;"
                                   FontFamily="Segoe MDL2 Assets"
                                   Foreground="Gray"
                                   VerticalAlignment="Center"/>
                            <TextBox Style="{StaticResource InputTextBoxWithPlaceholderStyle}" 
                                     Text="{Binding Email}"
                                     Margin="10,0,0,0"
                                     Width="250"
                                     Tag="E-mail"/>
                        </StackPanel>
                    </Border>
                    <Border Style="{StaticResource SignUpInputBoxStyle}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE72E;"
                                       FontFamily="Segoe MDL2 Assets"
                                       Foreground="Gray"
                                       VerticalAlignment="Center"/>
                            <TextBox Style="{StaticResource InputTextBoxWithPlaceholderStyle}" 
                                     Text="{Binding Password}"
                                     Margin="10,0,0,0"
                                     Width="250"/>
                        </StackPanel>
                    </Border>
                    <!-- 用 Grid 替代 StackPanel，实现两端对齐 -->
                    <Grid HorizontalAlignment="Stretch" 
                          Margin="0,0,0,0"
                          ShowGridLines="True">
                        <!-- 定义两列：第一列居左，第二列居右 -->
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <!-- 第一列宽度自适应按钮 -->
                            <ColumnDefinition Width="*"/>
                            <!-- 中间空白占满剩余空间 -->
                            <ColumnDefinition Width="Auto"/>
                            <!-- 第三列宽度自适应按钮 -->
                        </Grid.ColumnDefinitions>

                        <!-- 左侧按钮（放在第0列） -->
                        <Button Content="Back" 
                                Command="{Binding ShowLoginViewCommand}" 
                                Style="{StaticResource ClickBtn}"
                                Margin="0,20,0,0"
                                Width="70"
                                Height="30"
                                Grid.Column="0"/>
                        <!-- 指定列索引 -->

                        <!-- 右侧按钮（放在第2列） -->
                        <Button Content="Register" 
                                Command="{Binding RegisterCommand}"
                                Style="{StaticResource ClickBtn}"
                                Margin="0,20,0,0"
                                Width="70"
                                Height="30"
                                Grid.Column="2"/>
                        <!-- 指定列索引 -->
                    </Grid>
                    <!-- Login Link -->
                    <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center"
                            Margin="0,40,0,0">
                        <TextBlock Text="Already have an account"
                                   Foreground="Gray"/>
                        <Button Content="Login to your account"
                            Foreground="#007BFF"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand"
                            Margin="5,0,0,0"/>
                    </StackPanel>
                </StackPanel>
                </Grid>
            </Grid>
        </Grid>
</UserControl>
